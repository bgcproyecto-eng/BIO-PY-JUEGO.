<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BIO PY</title>
  <style>
    :root{
      --bg-1: #08331f;
      --bg-2: #0f4d32;
      --card-width: 120px;
      --card-gap: 16px;
      --accent: #e8f1d7;
      --muted-white: rgba(255,255,255,0.92);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;color:var(--muted-white);}
    body{
      display:flex;flex-direction:column;align-items:center;padding:28px;
      background: radial-gradient(circle at 10% 10%, rgba(255,255,255,0.02), transparent 10%), 
                  linear-gradient(180deg,var(--bg-1),var(--bg-2));
      background-size:cover;min-height:100vh;
    }

    header{width:100%;max-width:920px;display:flex;align-items:center;gap:14px;margin-bottom:18px}
    h1{margin:0;font-family:Georgia,serif;font-size:38px;color:var(--accent)}
    p.lead{margin:4px 0 0;opacity:0.95;font-size:14px}

    .controls{width:100%;max-width:920px;margin:12px 0 18px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap}
    .stat{background:rgba(255,255,255,0.06);padding:8px 12px;border-radius:12px;min-width:110px;text-align:center}
    .stat strong{display:block;font-size:18px;color:var(--muted-white)}
    #restart{margin-left:6px;padding:8px 12px;border-radius:10px;border:none;background:#ffd88d;color:#2b2b2b;cursor:pointer;font-weight:600}

    main{width:100%;max-width:920px;display:flex;flex-direction:column;align-items:center}
    .board{display:grid;grid-template-columns:repeat(4,var(--card-width));gap:var(--card-gap);padding:20px;background:rgba(255,255,255,0.04);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,0.35)}
    .card{width:var(--card-width);height:150px;perspective:900px;cursor:pointer;position:relative;border-radius:12px;user-select:none}
    .card-inner{position:absolute;inset:0;transition:transform 0.55s;transform-style:preserve-3d;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.25)}
    .card.flipped .card-inner{transform:rotateY(180deg)}
    .card-face{position:absolute;inset:0;border-radius:12px;display:flex;align-items:center;justify-content:center;backface-visibility:hidden;overflow:hidden}
    .card-back{background:linear-gradient(135deg,rgba(255,255,255,0.05),rgba(255,255,255,0.02));border:2px dashed rgba(255,255,255,0.1);font-size:28px;color:rgba(255,255,255,0.85)}
    .card-front{transform:rotateY(180deg);background:#fff;padding:6px;flex-direction:column}
    .card-front img{width:100%;height:84%;object-fit:cover;border-radius:8px}
    .card-front span{display:block;margin-top:6px;font-weight:600;color:#222;font-size:13px;text-align:center}
    .card.matched{opacity:0.8;transform:scale(0.985);cursor:default}
    footer{margin-top:14px;color:rgba(255,255,255,0.8);font-size:13px;text-align:center}

    /* Modal */
    .modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;visibility:hidden;opacity:0;transition:opacity .25s}
    .modal.show{visibility:visible;opacity:1}
    .modal-content{background:#fff;color:#062116;padding:22px;border-radius:14px;text-align:center;max-width:360px;width:92%}
    .modal-content h2{margin:4px 0 8px;font-size:20px}
    .modal-content p{margin:0;font-size:15px}
    .modal-content .btns{margin-top:12px;display:flex;gap:8px;justify-content:center}
    .btn{padding:8px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn.green{background:#2e8b57;color:#fff}
    .btn.light{background:#ffd88d;color:#222}

    @media (max-width:520px){
      :root{--card-width:92px}
      .board{grid-template-columns:repeat(3,var(--card-width))}
      h1{font-size:28px}
    }
  </style>
</head>
<body>
  <header>
    <div>
      <h1>BIO PY</h1>
      <p class="lead">Juego de memoria — Especies del Paraguay</p>
    </div>
  </header>

  <div class="controls">
    <div class="stat">Movimientos<br><strong id="moves">0</strong></div>
    <div class="stat">Aciertos<br><strong id="matches">0</strong></div>
    <div class="stat">Tiempo<br><strong id="time">0s</strong></div>
    <button id="restart">Reiniciar</button>
  </div>

  <main>
    <section class="board" id="board"></section>
    <footer>Se mostrará el orden durante 1 segundo para memorizar; luego las cartas se giran.</footer>
  </main>

  <div class="modal" id="winModal">
    <div class="modal-content">
      <h2 id="resultTitle"></h2>
      <p id="resultMessage"></p>
      <div class="btns">
        <button class="btn green" id="playAgainBtn">Jugar de nuevo</button>
        <button class="btn light" id="closeModalBtn">Cerrar</button>
      </div>
    </div>
  </div>

  <script>
    const species = [
      { id: 'jaguarete', name: 'Jaguarete', imgUrl: 'https://unidosporelyaguarete.vidasilvestre.org.ar/wp-content/uploads/Staffan-Widstrand-WWF-copy.jpg' },
      { id: 'guacamayo', name: 'Guacamayo', imgUrl: 'https://i.pinimg.com/564x/3d/f5/4b/3df54bd4e85aa27d36a909daadc27136.jpg' },
      { id: 'lapacho_rosa', name: 'Lapacho Rosa', imgUrl: 'https://fabriciob.ar/web/wp-content/uploads/2023/08/LAPACHOP-ROSADO.jpg' },
      { id: 'lapacho_amarillo', name: 'Lapacho Amarillo', imgUrl: 'https://previews.123rf.com/images/chfonk/chfonk1602/chfonk160200038/53821140-yellow-flower-tree-golden-trumpet-tabebuia-tree-of-gold-isolated-on-white-background.jpg' },
      { id: 'lapacho_blanco', name: 'Lapacho Blanco', imgUrl: 'https://i.pinimg.com/originals/25/10/50/251050765f8c879278420fb55914095e.jpg' },
      { id: 'yacare', name: 'Yacaré', imgUrl: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNrkuPQ0FxD5zJRhzP3H2ie_V9Z8ZSKrCmXA&s' }
    ];

    let deck = [], first=null, second=null, lock=false, clickable=false;
    let moves=0, matches=0, timer=null, seconds=0;
    const boardEl=document.getElementById('board'),
          movesEl=document.getElementById('moves'),
          matchesEl=document.getElementById('matches'),
          timeEl=document.getElementById('time'),
          restartBtn=document.getElementById('restart'),
          winModal=document.getElementById('winModal'),
          playAgainBtn=document.getElementById('playAgainBtn'),
          closeModalBtn=document.getElementById('closeModalBtn'),
          resultTitle=document.getElementById('resultTitle'),
          resultMessage=document.getElementById('resultMessage');

    function buildDeck(){ deck=[]; species.forEach(s=>{deck.push({...s}); deck.push({...s});}); }
    function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}

    function createCard(data){
      const card=document.createElement('div');
      card.className='card';
      card.dataset.id=data.id;
      const inner=document.createElement('div');inner.className='card-inner';
      const back=document.createElement('div');back.className='card-face card-back';
      const front=document.createElement('div');front.className='card-face card-front';
      front.innerHTML=`<img src="${data.imgUrl}" alt="${data.name}" onerror="this.style.display='none';this.nextElementSibling.style.display='block';"><span style="display:none">${data.name}</span>`;
      inner.appendChild(back);inner.appendChild(front);card.appendChild(inner);
      card.addEventListener('click',()=>{if(!clickable)return;onCardClick(card);});
      return card;
    }

    function renderBoard(){boardEl.innerHTML='';shuffle(deck);deck.forEach(c=>boardEl.appendChild(createCard(c)));}
    function showAll(){document.querySelectorAll('.card').forEach(c=>c.classList.add('flipped'));}
    function hideAll(){document.querySelectorAll('.card').forEach(c=>c.classList.remove('flipped'));}
    function startTimer(){if(timer)return;timer=setInterval(()=>{seconds++;timeEl.textContent=seconds+'s';},1000);}
    function stopTimer(){clearInterval(timer);timer=null;}

    function onCardClick(card){
      if(lock||card.classList.contains('flipped')||card.classList.contains('matched'))return;
      card.classList.add('flipped');
      if(!first){first=card;return;}
      second=card;lock=true;moves++;movesEl.textContent=moves;
      if(first.dataset.id===second.dataset.id){
        setTimeout(()=>{first.classList.add('matched');second.classList.add('matched');
          matches++;matchesEl.textContent=matches;
          first=null;second=null;lock=false;
          if(matches===species.length){stopTimer();showResult();}
        },500);
      }else{
        setTimeout(()=>{first.classList.remove('flipped');second.classList.remove('flipped');first=null;second=null;lock=false;},900);
      }
    }

    function memorizePhase(d=1){
      clickable=false;stopTimer();seconds=0;timeEl.textContent='0s';moves=0;matches=0;movesEl.textContent='0';matchesEl.textContent='0';
      renderBoard();requestAnimationFrame(()=>{showAll();setTimeout(()=>{hideAll();clickable=true;startTimer();},d*1000);});
    }

    function restartGame(){buildDeck();memorizePhase(1);}
    function showResult(){
      winModal.classList.add('show');
      if(seconds <= 30){
        resultTitle.textContent="¡Excelente memoria! 🌿";
        resultMessage.textContent="Has completado el juego.";
      } else {
        resultTitle.textContent="⏰ Fuiste muy lento";
        resultMessage.textContent="Intenta mejorar tu memoria la próxima vez.";
      }
    }
    function hideModal(){winModal.classList.remove('show');}

    restartBtn.onclick=restartGame;
    playAgainBtn.onclick=()=>{hideModal();restartGame();};
    closeModalBtn.onclick=hideModal;
    document.addEventListener('keydown',e=>{if(e.key==='Escape')hideModal();});

    restartGame();
  </script>
</body>
</html>


